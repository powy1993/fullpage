/* 
 * Chriswang
 * 396276123@qq.com
 * 2014.11.13
 * Github:https://github.com/powy1993/fullpage
 */

function FullPage(l){function z(a,c,b,d){this.cx=3*a;this.bx=3*(b-a)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*c;this.by=3*(d-c)-this.cy;this.ay=1-this.cy-this.by}var g=document.getElementById(l.id),f=g.children,A=f.length,t=A,B=l.slideTime||800,C=l.effect||{},h=0,v,D,N,k,u,m,E,F,G,H,I=[],J,n,K=null,w=!1,L=!1,O,x,p,r,P,Q,y,s,R,M;if(f&&1!==A){l.mode&&(L=-1!==l.mode.indexOf("nav:"),I=l.mode.split(","),J=I.length);v=!!window.addEventListener;D="ontouchstart"in window||window.DocumentTouch&&document instanceof
DocumentTouch;N=function(){var a=navigator.userAgent,c=a.indexOf("Android"),b;if(-1!==a.indexOf("QQBrowser"))return-1;-1!==c&&(b=a.substring(c+7,c+11).replace(" ",""));return b||0}();k=function(a){switch(!0){case ""===a.webkitTransition:return"webkit";case ""===a.MozTransition:return"Moz";case ""===a.msTransition:return"ms";case ""===a.OTransition:return"O";default:return""}}(document.createElement("Chriswang").style);z.prototype={epsilon:1E-5,sampleCurveX:function(a){return((this.ax*a+this.bx)*a+
this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,c){var b,d,e,q;e=a;for(d=0;8>d;d++){q=this.sampleCurveX(e)-a;if(Math.abs(q)<c)return e;b=this.sampleCurveDerivativeX(e);if(Math.abs(b)<c)break;e-=q/b}b=0;d=1;e=a;if(e<b)return b;if(e>d)return d;for(;b<d;){q=this.sampleCurveX(e);if(Math.abs(q-a)<c)break;a>q?b=e:d=e;e=.5*(d-b)+b}return e},solve:function(a,c){return this.sampleCurveY(this.solveCurveX(a,
c))}};x=function(){g.style.height=document.documentElement.clientHeight+"px"||window.innerHeight+"px";u=g.offsetWidth;m=g.offsetHeight};p=function(a,c,b,d){E=a;F=c;G=b;H=d};if("string"===typeof l.easing)switch(l.easing){case "ease":p(.25,.1,.25,1);break;case "linear":p(0,0,1,1);break;case "ease-in":p(.42,0,1,1);break;case "ease-out":p(0,0,.58,1);break;case "ease-in-out":p(.42,0,.58,1)}else p(l.easing[0],l.easing[1],l.easing[2],l.easing[3]);if(""!==k){for(;t--;)f[t].style[k+"TransitionTimingFunction"]=
"cubic-bezier("+E+","+F+","+G+","+H+")";r=function(a,c,b,d,e){a=a.style;c="translate("+c+"px,"+b+"px) translateZ(0)";e.scale&&(c+=0===d?" scale("+e.scale[0]+")":" scale("+e.scale[1]+")");e.rotate&&(c+=0===d?" rotate("+e.rotate[0]+"deg)":" rotate("+e.rotate[1]+"deg)");a[k+"Transform"]=c}}else O=new z(E,F,G,H),r=function(a,c,b,d){var e=a.currentStyle,q=a.style,f=parseInt(q.left||e.left,10),h=parseInt(q.top||e.top,10),l=c-f,n=b-h,m=+new Date+d,g=0,k=C.opacity,p;clearInterval(K);K=setInterval(function(){var a;
+new Date>m?(a=k?"left:"+c+"px;top:"+b+"px;filter:alpha(opacity="+100*k[1]+");":"left:"+c+"px;top:"+b+"px;",clearInterval(K)):(p=m-new Date,g=p/d,g=O.solve(1-g,z.prototype.epsilon),a="left:"+(f+l*g)+"px;top:"+(h+n*g)+"px;",k&&(a+="filter:alpha(opacity="+100*(k[1]*g-k[0]*(1-g))+");"));q.cssText=a},13)};P={transform:function(a,c,b){var d=0,e=""!==k||"none"!==a.translate&&a.translate?-1!==N?20:120:0;switch(a.translate){case "Y":d=b>c?m:-m;r(f[b],0,d,0,a);break;case "X":d=b>c?u:-u;r(f[b],d,0,0,a);break;
case "XY":d={X:b>c?u:-u,Y:b>c?m:-m};r(f[b],d.X,d.Y,0,a);break;default:r(f[b],0,0,0,a)}setTimeout(function(){r(f[b],0,0,B,a)},e)},opacity:function(a,c,b){var d=f[b].style;d.opacity=a[0];setTimeout(function(){d.opacity=a[1]},50)}};Q=v&&D?function(a,c,b){a.addEventListener("touchstart",c,!1);b&&a.addEventListener("touchmove",function(a){a.preventDefault()},!1)}:function(a,c){a.onclick=c};y=function(a,c,b){var d=a.className,e=[];if(-1!==d.indexOf(c)){e=d.split(" ");for(d=e.length;d--;)e[d]===c&&(" "===
b||""===b?e.splice(d,1):e[d]=b);e.length?a.className=e.join(" "):(a.removeAttribute("class"),a.removeAttribute("className"))}};L&&(R=function(a,c){var b=n[c].className;y(n[a],"active"," ");n[c].className=""===b?"active":b+" active"});s=function(a){var c,b;if(!(w||a===h||a>=A||0>a)){w=!0;for(c in C)P[c](C[c],h,a);c=""===k?20:0;b=h;h=a;L&&R(b,h);setTimeout(function(){f[a].className+=" slide"},c);setTimeout(function(){f[a].style[k+"TransitionDuration"]=B+"ms"},20);setTimeout(function(){y(f[b],"current",
"");y(f[h],"slide","current");l.callback&&l.callback(h,f[h]);w=!1},B+50)}};x();t=f[h].className;f[h].className=-1!==t.indexOf("current")?t:t+" current";for(v?window.addEventListener("resize",x,!1):window.onresize=x;J--;)(function(a){switch(!0){case "wheel"===a:M=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;w||(a=-a.wheelDelta||a.detail,s(h+(0>a?-1:1)))};v&&document.addEventListener("DOMMouseScroll",M,!1);window.onmousewheel=document.onmousewheel=M;break;case "touch"===
a:if(!D||!v)break;(function(){var a,b,d={};a=function(a){1<event.touches.length||event.scale&&1!==event.scale||a.preventDefault()};b=function(a){var b=a.changedTouches[0];a=+new Date-d.time;var c,f,g;c=0;var k=!1;c=b.pageX-d.x;b=b.pageY-d.y;f=Math.abs(c);g=Math.abs(b);switch(l.effect.transform.translate){case "Y":k=250>+a&&20<g||g>.3*m;c=0<b?-1:1;break;case "X":k=250>+a&&20<f||f>.4*m;c=0<c?-1:1;break;default:k=250>+a&&50<g+f||g>.2*m||f>.3*u,c=f>g?0<c?-1:1:0<b?-1:1}k&&s(h+c)};g.addEventListener("touchstart",
function(e){e=e.touches[0];d={x:e.pageX,y:e.pageY,time:+new Date};g.addEventListener("touchmove",a,!1);g.addEventListener("touchend",b,!1)},!1)})();break;case -1!==a.indexOf("nav:"):(function(){var c=a.split(":")[1],c=document.getElementById(c),b,d;n=c.children;b=n.length;d=n[h].className;if(c&&n){for(;b--;)n[b].setAttribute("data-page",b);-1===d.indexOf("active")&&(n[h].className=""===d?"active":d+" active");b=function(a){var b;a=a||window.event;a=a.target||a.srcElement;for(b=a.tagName.toLowerCase();"li"!==
b;){if("ul"===b)return;a=a.parentNode;b=a.tagName.toLowerCase()}s(+a.getAttribute("data-page"))};Q(c,b,1)}})()}})(I[J]);return{thisPage:function(){return h},go:function(a){s(a)},next:function(){s(h+1)},prev:function(){s(h-1)}}}};