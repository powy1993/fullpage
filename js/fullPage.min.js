/* 
 * Chriswang
 * 396276123@qq.com
 * 2014.11.21
 * Github:https://github.com/powy1993/fullpage
 */
 
function FullPage(l){function B(a,f,e,c){this.cx=3*a;this.bx=3*(e-a)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*f;this.by=3*(c-f)-this.cy;this.ay=1-this.cy-this.by}var C=document.getElementById(l.id),g=C.children,F=g.length,R=F,D=l.slideTime||800,w=l.effect||{},b=0,x,I,h,r,n,J,K,L,M,E=[],N=[],O,s,P=null,t=!1,G=!1,S,m,y,z,u,T,U,p,A,H,Q;if(g&&1!==F){l.mode&&(G=-1!==l.mode.indexOf("nav:"),N=l.mode.split(","),O=N.length);for(m=0;m<F;m++)E.push(g[m].style);x=!!window.addEventListener;I="ontouchstart"in
window||window.DocumentTouch&&document instanceof DocumentTouch;(function(){var a=navigator.userAgent,f=a.indexOf("Android"),e;y=-1!==a.indexOf("QQBrowser")?200:0;-1!==f&&(e=a.substring(f+7,f+11).replace(" ",""));return e||0})();h=function(a){switch(!0){case ""===a.webkitTransition:return"webkit";case ""===a.MozTransition:return"Moz";case ""===a.msTransition:return"ms";case ""===a.OTransition:return"O";default:return""}}(document.createElement("Chriswang").style);B.prototype={epsilon:1E-5,sampleCurveX:function(a){return((this.ax*
a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,f){var e,c,d,b;d=a;for(c=0;8>c;c++){b=this.sampleCurveX(d)-a;if(Math.abs(b)<f)return d;e=this.sampleCurveDerivativeX(d);if(Math.abs(e)<f)break;d-=b/e}e=0;c=1;d=a;if(d<e)return e;if(d>c)return c;for(;e<c;){b=this.sampleCurveX(d);if(Math.abs(b-a)<f)break;a>b?e=d:c=d;d=.5*(c-e)+e}return d},solve:function(a,f){return this.sampleCurveY(this.solveCurveX(a,
f))}};z=function(){r=document.documentElement.clientWidth||window.innerWidth;n=document.documentElement.clientHeight||window.innerHeight;C.style.height=n+"px"};m=function(a,f,e,b){J=a;K=f;L=e;M=b};if("string"===typeof l.easing)switch(l.easing){case "ease":m(.25,.1,.25,1);break;case "linear":m(0,0,1,1);break;case "ease-in":m(.42,0,1,1);break;case "ease-out":m(0,0,.58,1);break;case "ease-in-out":m(.42,0,.58,1)}else m(l.easing[0],l.easing[1],l.easing[2],l.easing[3]);if(""!==h){for(;R--;)E[R][h+"TransitionTimingFunction"]=
"cubic-bezier("+J+","+K+","+L+","+M+")";u=function(a,f,e,b,d){a=a.style;f="translate("+f+"px,"+e+"px) translateZ(0)";d.scale&&(f+=0===b?" scale("+d.scale[0]+")":" scale("+d.scale[1]+")");d.rotate&&(f+=0===b?" rotate("+d.rotate[0]+"deg)":" rotate("+d.rotate[1]+"deg)");a[h+"TransformOrigin"]="50% 50%";a[h+"Transform"]=f}}else S=new B(J,K,L,M),u=function(a,f,b,c){var d=a.currentStyle,g=a.style,h=parseInt(g.left||d.left,10),l=parseInt(g.top||d.top,10),p=f-h,m=b-l,q=+new Date+c,k=0,n=w.opacity,r;clearInterval(P);
P=setInterval(function(){var a;+new Date>q?(a=n?"left:"+f+"px;top:"+b+"px;filter:alpha(opacity="+100*n[1]+");":"left:"+f+"px;top:"+b+"px;",clearInterval(P)):(r=q-new Date,k=r/c,k=S.solve(1-k,B.prototype.epsilon),a="left:"+(h+p*k)+"px;top:"+(l+m*k)+"px;",n&&(a+="filter:alpha(opacity="+100*(n[1]*k-n[0]*(1-k))+");"));g.cssText=a},13)};T={transform:function(a,f,b){var c=0,d=""!==h||"none"!==a.translate&&a.translate?y:-50;switch(a.translate){case "Y":c=b>f?n:-n;u(g[b],0,c,0,a);break;case "X":c=b>f?r:-r;
u(g[b],c,0,0,a);break;case "XY":c={X:b>f?r:-r,Y:b>f?n:-n};u(g[b],c.X,c.Y,0,a);break;default:u(g[b],0,0,0,a)}setTimeout(function(){u(g[b],0,0,D,a)},d+50)},opacity:function(a,b,e){var c=g[e].style;c.opacity=a[0];setTimeout(function(){c.opacity=a[1]},70)}};U=x&&I?function(a,b,e){a.addEventListener("touchstart",b,!1);e&&a.addEventListener("touchmove",function(a){a.preventDefault()},!1)}:function(a,b){a.onclick=b};p=function(a,b,e){var c=a.className,d=[];if(-1!==c.indexOf(b)){d=c.split(" ");for(c=d.length;c--;)d[c]===
b&&(" "===e||""===e?d.splice(c,1):d[c]=e);d.length?a.className=d.join(" "):(a.removeAttribute("class"),a.removeAttribute("className"))}};G&&(H=function(a,b){var e=s[b].className;p(s[a],"active"," ");s[b].className=""===e?"active":e+" active"});A=function(a){var f=y,e,c;if(!(t||a===b||a>=F||0>a)){t=!0;for(c in w)T[c](w[c],b,a);f+=""===h?20:0;e=b;b=a;G&&H(e,b);setTimeout(function(){g[a].className+=" slide"},f);setTimeout(function(){E[a][h+"TransitionDuration"]=D+"ms"},20);setTimeout(function(){p(g[e],
"current","");p(g[b],"slide","current");l.callback&&l.callback(b,g[b]);t=!1},D+y+120)}};z();m=g[b].className;g[b].className=-1!==m.indexOf("current")?m:m+" current";for(x?window.addEventListener("resize",z,!1):window.onresize=z;O--;)(function(a){switch(!0){case "wheel"===a:Q=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;t||(a=-a.wheelDelta||a.detail,A(b+(0>a?-1:1)))};x&&document.addEventListener("DOMMouseScroll",Q,!1);window.onmousewheel=document.onmousewheel=
Q;break;case "touch"===a:if(!I||!x)break;(function(){var a=w.transform.scale[1]-w.transform.scale[0],e=w.transform.rotate[0],c=w.transform.rotate[1]-w.transform.rotate[0],d,m,s,u,A,v={},q,k,x,y,z,B;"Y"===w.transform.translate?(x=function(){q=E[b-1];k=E[b+1];q&&(q[h+"Transform"]="translate(0,-"+n+"px) translateZ(0)",q[h+"TransformOrigin"]="50% 100%",g[b-1].className+=" swipe");k&&(k[h+"Transform"]="translate(0,"+n+"px) translateZ(0)",k[h+"TransformOrigin"]="50% 0%",g[b+1].className+=" swipe")},B=function(b){var d=
Math.abs(b.y/n),d=" scale("+a*d*.7+") rotate("+(e+c*d)+"deg)";q&&0<b.y&&(q[h+"Transform"]="translate(0,"+(b.y-n)+"px) translateZ(0)"+d);k&&0>b.y&&(k[h+"Transform"]="translate(0,"+(n+b.y)+"px) translateZ(0)"+d)},y=function(a,d){var c=D>>1;p(g[b+d],"swipe","slide");a[h+"TransitionDuration"]=c+"ms";a[h+"Transform"]="translate(0,"+d*n+"px) translateZ(0)";setTimeout(function(){p(g[b+d],"slide","");setTimeout(function(){t=!1},50)},c)},z=function(a,d){var c=b+d,e=~~(D/1.5),f=g[b-d];f&&p(f,"swipe","");0>
c||c>F-1?setTimeout(function(){t=!1},50):(G&&H(b,c),p(g[c],"swipe","slide"),a[h+"TransitionDuration"]=e+"ms",a[h+"Transform"]="translate(0,0) translateZ(0)",setTimeout(function(){p(g[b],"current","");p(g[c],"slide","current");b=c;l.callback&&l.callback(b,g[b]);setTimeout(function(){t=!1},50)},e))}):(x=function(){q=E[b-1];k=E[b+1];q&&(q[h+"Transform"]="translate(-"+r+"px,0) translateZ(0)",q[h+"TransformOrigin"]="100% 50%",g[b-1].className+=" swipe");k&&(k[h+"Transform"]="translate("+r+"px,0) translateZ(0)",
k[h+"TransformOrigin"]="0 50%",g[b+1].className+=" swipe")},B=function(b){var d=Math.abs(b.x/r),d=" scale("+a*d*.7+") rotate("+(e+c*d)+"deg)";q&&0<b.x&&(q[h+"Transform"]="translate("+(b.x-r)+"px,0) translateZ(0)"+d);k&&0>b.x&&(k[h+"Transform"]="translate("+(r+b.x)+"px,0) translateZ(0)"+d)},y=function(a,d){var c=D>>1;p(g[b+d],"swipe","slide");a[h+"TransitionDuration"]=c+"ms";a[h+"Transform"]="translate("+d*r+"px,0) translateZ(0)";setTimeout(function(){p(g[b+d],"slide","");setTimeout(function(){t=!1},
50)},c)},z=function(a,d){var c=b+d,e=~~(D/1.5),f=g[b-d];f&&p(f,"swipe","");0>c||c>F-1?setTimeout(function(){t=!1},50):(G&&H(b,c),p(g[c],"swipe","slide"),a[h+"TransitionDuration"]=e+"ms",a[h+"Transform"]="translate(0,0) translateZ(0)",setTimeout(function(){p(g[b],"current","");p(g[c],"slide","current");b=c;l.callback&&l.callback(b,g[b]);setTimeout(function(){t=!1},50)},e))});d=function(a){var b=a.touches[0];a.preventDefault();1<event.touches.length||event.scale&&1!==event.scale||(v={x:b.pageX-s,y:b.pageY-
u},B(v))};m=function(a){var b=a.changedTouches[0];a=+new Date-A;var c;c=0;var e=!1;v={x:b.pageX-s,y:b.pageY-u};b=Math.abs(v.x);c=Math.abs(v.y);switch(l.effect.transform.translate){case "Y":e=250>+a&&30<c||c>.3*n;c=0<v.y?-1:1;break;case "X":e=250>+a&&30<b||b>.3*r;c=0<v.x?-1:1;break;default:e=350>+a&&50<c+b||c>.3*n||b>.3*r,c=b>c?0<v.x?-1:1:0<v.y?-1:1}e?-1===c?z(q,-1):z(k,1):(q&&y(q,-1),k&&y(k,1));C.removeEventListener("touchmove",d,!1);C.removeEventListener("touchend",m,!1)};C.addEventListener("touchstart",
function(a){var b=a.touches[0];a.preventDefault();t||(t=!0,s=b.pageX,u=b.pageY,A=+new Date,v={},x(),C.addEventListener("touchmove",d,!1),C.addEventListener("touchend",m,!1))},!1)})();break;case -1!==a.indexOf("nav:"):(function(){var f=a.split(":")[1],f=document.getElementById(f),e,c;s=f.children;e=s.length;c=s[b].className;if(f&&s){for(;e--;)s[e].setAttribute("data-page",e);-1===c.indexOf("active")&&(s[b].className=""===c?"active":c+" active");e=function(a){var b;a=a||window.event;a=a.target||a.srcElement;
for(b=a.tagName.toLowerCase();"li"!==b;){if("ul"===b)return;a=a.parentNode;b=a.tagName.toLowerCase()}A(+a.getAttribute("data-page"))};U(f,e,1)}})()}})(N[O]);return{thisPage:function(){return b},go:function(a){A(a)},next:function(){A(b+1)},prev:function(){A(b-1)}}}};