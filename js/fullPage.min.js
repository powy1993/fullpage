/* 
 * rusherwang
 * rusherwang@tencent.com
 * create: 2014.4.2
 * update: 2016.7.20
 * Github: https://github.com/powy1993/fullpage
 */
 
function FullPage(g){function F(a,C,b,d){this.cx=3*a;this.bx=3*(b-a)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*C;this.by=3*(d-C)-this.cy;this.ay=1-this.cy-this.by}var G=document.getElementById(g.id),c=G.children,x=c.length,ba=x,D=g.slideTime||800,z=g.effect||{},b=g.start||0,B,R,k,u,r,O,H,I,V,J=[],K=[],l=[],W=[],X,v,Y=null,t=!1,P=!1,ca,h,E,L,y,da,Z,ea,S,m,w,A,T,aa;if(c&&1!==x){g.mode&&(P=-1!==g.mode.indexOf("nav:"),W=g.mode.split(","),X=W.length);for(h=0;h<x;h++)J.push(c[h].style),K.push(+c[h].getAttribute("data-step")||
0),l.push(0);B=!!window.addEventListener;R="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;(function(){var a=navigator.userAgent,C=a.indexOf("Android"),b;E=-1!==a.indexOf("QQBrowser")?200:0;-1!==C&&(b=a.substring(C+7,C+11).replace(" ",""));return b||0})();k=function(a){switch(!0){case ""===a.webkitTransition:return"webkit";case ""===a.MozTransition:return"Moz";case ""===a.msTransition:return"ms";case ""===a.OTransition:return"O";default:return""}}(document.createElement("Chriswang").style);
F.prototype={epsilon:.01,sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,b){var f,d,e,c;e=a;for(d=0;8>d;d++){c=this.sampleCurveX(e)-a;if(Math.abs(c)<b)return e;f=this.sampleCurveDerivativeX(e);if(Math.abs(f)<b)break;e-=c/f}f=0;d=1;e=a;if(e<f)return f;if(e>d)return d;for(;f<d;){c=this.sampleCurveX(e);if(Math.abs(c-a)<
b)break;a>c?f=e:d=e;e=.5*(d-f)+f}return e},solve:function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}};L=function(){u=document.documentElement.clientWidth||window.innerWidth;r=document.documentElement.clientHeight||window.innerHeight;G.style.height=r+"px"};h=function(a,b,c,d){O=a;H=b;I=c;V=d};if("string"===typeof g.easing)switch(g.easing){case "ease":h(.25,.1,.25,1);break;case "linear":h(0,0,1,1);break;case "ease-in":h(.42,0,1,1);break;case "ease-out":h(0,0,.58,1);break;case "ease-in-out":h(.42,
0,.58,1)}else h(g.easing[0],g.easing[1],g.easing[2],g.easing[3]);if(""!==k){for(;ba--;)J[ba][k+"TransitionTimingFunction"]="cubic-bezier("+O+","+H+","+I+","+V+")";y=function(a,b,c,d,e){a=a.style;b="translate("+b+"px,"+c+"px) translateZ(0)";e.scale&&(b+=0===d?" scale("+e.scale[0]+")":" scale("+e.scale[1]+")");e.rotate&&(b+=0===d?" rotate("+e.rotate[0]+"deg)":" rotate("+e.rotate[1]+"deg)");a[k+"TransformOrigin"]="50% 50%";a[k+"Transform"]=b}}else ca=new F(O,H,I,V),y=function(a,b,c,d){var e=a.currentStyle,
g=a.style,k=parseInt(g.left||e.left,10),m=parseInt(g.top||e.top,10),h=b-k,t=c-m,r=+new Date+d,l=0,q=z.opacity,u;clearInterval(Y);Y=setInterval(function(){var a;+new Date>r?(a=q?"left:"+b+"px;top:"+c+"px;filter:alpha(opacity="+100*q[1]+");":"left:"+b+"px;top:"+c+"px;",clearInterval(Y)):(u=r-new Date,l=u/d,l=ca.solve(1-l,F.prototype.epsilon),a="left:"+(k+h*l)+"px;top:"+(m+t*l)+"px;",q&&(a+="filter:alpha(opacity="+~~(100*(q[1]*l-q[0]*(1-l)))+");"));g.cssText=a},13)};da={transform:function(a,b,f){var d=
0,e=""!==k||"none"!==a.translate&&a.translate?E:-50;switch(a.translate){case "Y":d=f>b?r:-r;y(c[f],0,d,0,a);break;case "X":d=f>b?u:-u;y(c[f],d,0,0,a);break;case "XY":d={X:f>b?u:-u,Y:f>b?r:-r};y(c[f],d.X,d.Y,0,a);break;default:y(c[f],0,0,0,a)}setTimeout(function(){y(c[f],0,0,D,a)},e+50)},opacity:function(a,b,f){var d=c[f].style;d.opacity=a[0];setTimeout(function(){d.opacity=a[1]},70)}};ea=B&&R?navigator.userAgent.indexOf("Firefox")?function(a,b){a.addEventListener("click",b,!1)}:function(a,b,c){a.addEventListener("touchstart",
b,!1);c&&a.addEventListener("touchmove",function(a){a.preventDefault()},!1)}:function(a,b){a.onclick=b};m=function(a,b,c){var d=a.className,e=[];if(-1!==d.indexOf(b)){e=d.split(" ");for(d=e.length;d--;)e[d]===b&&(" "===c||""===c?e.splice(d,1):e[d]=c);e.length?a.className=e.join(" "):(a.removeAttribute("class"),a.removeAttribute("className"))}};P&&(T=function(a,b){var c=v[b].className;m(v[a],"active"," ");v[b].className=""===c?"active":c+" active"});g.continuous&&(w=function(a,b){var c=x;if(b)if(a>=
x)for(;c--;)l[c]=0;else if(0>a)for(;c--;)l[c]=K[c];return(x+a%x)%x});Z=function(a){var g=l[b];a=g+a;if(0<=a&&a<=K[b]){if(0===a)return m(c[b],"step1",""),l[b]=a,!1;if(1===a&&0===g)return c[b].className+=" step1",l[b]=a,!1;m(c[b],"step"+g,"step"+a);l[b]=a;return!1}return!0};S=function(){var a=c[b].getAttribute("data-step-restart");null!=a&&(a=+a>K[b]?K[b]:+a,0===a?m(c[b],"step"+l[b],""):m(c[b],"step"+l[b],"step"+a),l[b]=a)};A=function(a,C){var f=-1!==navigator.userAgent.indexOf("Mac OS"),d=E,e,h;if(!(g.beforeChange&&
"stop"===g.beforeChange(b,c[b])||t||a===b)){if(g.continuous)a=w(a,1);else if(a>=x&&l[b]>=K[b]||0>a&&0===l[b])return;t=!0;if(!C&&!Z(a-b))return setTimeout(function(){t=!1},D);for(h in z)da[h](z[h],b,a);d+=""===k?20:0;e=b;b=a;P&&T(e,b);setTimeout(function(){c[a].className+=" slide"},d);setTimeout(function(){J[a][k+"TransitionDuration"]=D+"ms"},20);setTimeout(function(){S();m(c[e],"current","");m(c[b],"slide","current");g.callback&&g.callback(b,c[b]);f?setTimeout(function(){t=!1},500):t=!1},D+E+120)}};
L();h=c[b].className;c[b].className=-1!==h.indexOf("current")?h:h+" current";for(B?window.addEventListener("resize",L,!1):window.onresize=L;X--;)(function(a){switch(!0){case "wheel"===a:aa=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;t||(a=-a.wheelDelta||a.detail,A(b+(0>a?-1:1)))};B&&document.addEventListener("DOMMouseScroll",aa,!1);window.onmousewheel=document.onmousewheel=aa;break;case "touch"===a:if(!B)break;(function(){var a=z.transform.scale[0],f=z.transform.scale[1]-
a,d=z.transform.rotate[0],e=z.transform.rotate[1]-d,h=z.opacity[0],v=z.opacity[1]-h,y,A,B,E,L,q={},F=!1,O=-1===navigator.userAgent.indexOf("Windows Phone")?!1:!0,n,p,H,M,U,I,N,Q;N=!R&&O?window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"pointerDown",move:"pointerMove",end:"pointerUp"}:{start:"touchstart",move:"touchmove",end:"touchend"};document.body.ontouchmove=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};"Y"===z.transform.translate?
(H=function(){var a=b-1,e=b+1;g.continuous&&(a=w(a),e=w(e));n=J[a];p=J[e];n&&(n[k+"TransitionDuration"]="0ms",n[k+"Transform"]="translate(0,-"+r+"px) translateZ(0)",n[k+"TransformOrigin"]="50% 100%",c[a].className+=" swipe");p&&(p[k+"TransitionDuration"]="0ms",p[k+"Transform"]="translate(0,"+r+"px) translateZ(0)",p[k+"TransformOrigin"]="50% 0%",c[e].className+=" swipe")},I=function(b){var c=Math.abs(b.y/r),g=" scale("+~~(100*(a+f*c))/100+") rotate("+~~(d+e*c)+"deg)";n&&0<b.y&&(n.opacity=~~(100*(h+
v*c))/100,n[k+"Transform"]="translate(0,"+~~(b.y-r)+"px) translateZ(0)"+g);p&&0>b.y&&(p.opacity=~~(100*(h+v*c))/100,p[k+"Transform"]="translate(0,"+~~(r+b.y)+"px) translateZ(0)"+g)},M=function(a,e){var d=D>>1,f=b+e;g.continuous&&(f=w(f));m(c[f],"swipe","slide");a.opacity=1;a[k+"TransitionDuration"]=d+"ms";a[k+"Transform"]="translate(0,"+e*r+"px) translateZ(0)";setTimeout(function(){m(c[f],"slide","");setTimeout(function(){t=!1},50)},d)},U=function(a,e){var d=b+e,f=~~(D/1.5),h,l;g.continuous?(d=w(d),
h=c[w(b-e)],l=!0):h=c[b-e];h&&m(h,"swipe","");!l&&0>d||d>x-1?setTimeout(function(){t=!1},50):(P&&T(b,d),a.opacity=1,m(c[d],"swipe","slide"),a[k+"TransitionDuration"]=f+"ms",a[k+"Transform"]="translate(0,0) translateZ(0)",setTimeout(function(){S();m(c[b],"current","");m(c[d],"slide","current");b=d;g.callback&&g.callback(b,c[b]);setTimeout(function(){t=!1},50)},f))}):(H=function(){var a=b-1,e=b+1;g.continuous&&(a=w(a),e=w(e));n=J[a];p=J[e];n&&(n[k+"TransitionDuration"]="0ms",n[k+"Transform"]="translate(-"+
u+"px,0) translateZ(0)",n[k+"TransformOrigin"]="100% 50%",c[a].className+=" swipe");p&&(p[k+"TransitionDuration"]="0ms",p[k+"Transform"]="translate("+u+"px,0) translateZ(0)",p[k+"TransformOrigin"]="0 50%",c[e].className+=" swipe")},I=function(b){var c=Math.abs(b.x/u),g=" scale("+~~(100*(a+f*c))/100+") rotate("+~~(d+e*c)+"deg)";n&&0<b.x&&(n.opacity=~~(100*(h+v*c))/100,n[k+"Transform"]="translate("+~~(b.x-u)+"px,0) translateZ(0)"+g);p&&0>b.x&&(p.opacity=~~(100*(h+v*c))/100,p[k+"Transform"]="translate("+
~~(u+b.x)+"px,0) translateZ(0)"+g)},M=function(a,e){var d=D>>1,f=b+e;g.continuous&&(f=w(f));m(c[f],"swipe","slide");a.opacity=1;a[k+"TransitionDuration"]=d+"ms";a[k+"Transform"]="translate("+e*u+"px,0) translateZ(0)";setTimeout(function(){m(c[f],"slide","");setTimeout(function(){t=!1},50)},d)},U=function(a,e){var d=b+e,f=~~(D/1.5),h,l;g.continuous?(d=w(d),h=c[w(b-e)],l=!0):h=c[b-e];h&&m(h,"swipe","");!l&&0>d||d>x-1?setTimeout(function(){t=!1},50):(P&&T(b,d),m(c[d],"swipe","slide"),a.opacity=1,a[k+
"TransitionDuration"]=f+"ms",a[k+"Transform"]="translate(0,0) translateZ(0)",setTimeout(function(){S();m(c[b],"current","");m(c[d],"slide","current");b=d;g.callback&&g.callback(b,c[b]);setTimeout(function(){t=!1},50)},f))});y=function(a){var c=a.touches?a.touches[0]:a;a.preventDefault();R&&(1<event.touches.length||event.scale&&1!==event.scale)||(q={x:c.pageX-B,y:c.pageY-E},F?(a="X"===g.effect.transform.translate?0>q.x?1:-1:0>q.y?1:-1,0<=l[b]+a&&l[b]+a<=K[b]||Q&&I(q)):(Q=Math.abs(q.x)>Math.abs(q.y)?
"X":"Y",Q=Q===g.effect.transform.translate?!0:!1,F=!0))};A=function(a){var e=a.changedTouches?a.changedTouches[0]:a;a=+new Date-L;var d;d=0;var f=!1;q={x:e.pageX-B,y:e.pageY-E};e=Math.abs(q.x);d=Math.abs(q.y);switch(g.effect.transform.translate){case "Y":f=250>+a&&30<d||d>.3*r;d=0<q.y?-1:1;break;case "X":f=250>+a&&30<e||e>.3*u;d=0<q.x?-1:1;break;default:f=350>+a&&50<d+e||d>.3*r||e>.3*u,d=e>d?0<q.x?-1:1:0<q.y?-1:1}f&&Q&&Z(d)&&(!1!==g.continuous||(n||-1!==d)&&(p||1!==d))?g.beforeChange&&"stop"===g.beforeChange(b,
c[b])?(n&&M(n,-1),p&&M(p,1)):-1===d?U(n,-1):U(p,1):(n&&M(n,-1),p&&M(p,1));G.removeEventListener(N.move,y,!1);G.removeEventListener(N.end,A,!1)};G.addEventListener(N.start,function(a){a=a.touches?a.touches[0]:a;if(!t){t=!0;B=a.pageX;E=a.pageY;L=+new Date;if(g.onSwipeStart&&"stop"===g.onSwipeStart(b,c[b]))return t=!1;q={};F=!1;H();G.addEventListener(N.move,y,!1);G.addEventListener(N.end,A,!1)}},!1)})();break;case -1!==a.indexOf("nav:"):(function(){var c=a.split(":")[1],c=document.getElementById(c),
f,d;v=c.children;f=v.length;d=v[b].className;if(c&&v){for(;f--;)v[f].setAttribute("data-page",f);-1===d.indexOf("active")&&(v[b].className=""===d?"active":d+" active");f=function(a){var b;a=a||window.event;a=a.target||a.srcElement;for(b=a.tagName.toLowerCase();"li"!==b;){if("ul"===b)return;a=a.parentNode;b=a.tagName.toLowerCase()}A(+a.getAttribute("data-page"),1)};ea(c,f,1)}})()}})(W[X]);return{thisPage:function(){return b},go:function(a){A(a)},next:function(){A(b+1)},prev:function(){A(b-1)}}}};
